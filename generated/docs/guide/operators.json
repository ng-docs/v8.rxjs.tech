{"id":"guide/operators","title":"RxJS 操作符","contents":"\n<div class=\"content\">\n<h1 id=\"rxjs-operators\" translation-result=\"on\">RxJS 操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#rxjs-operators\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">RxJS Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#rxjs-operators\"><i class=\"material-icons\">link</i></a></h1>\n\n<p>RxJS is mostly useful for its <em>operators</em>, even though the Observable is the foundation. Operators are the essential pieces that allow complex asynchronous code to be easily composed in a declarative manner.</p>\n<h2 id=\"what-are-operators\" translation-result=\"on\">什么是操作符？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#what-are-operators\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">What are operators?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#what-are-operators\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">操作符是<strong>函数</strong>。有两种操作符：</p><p translation-origin=\"off\">Operators are <strong>functions</strong>. There are two kinds of operators:</p>\n\n<p><strong>Pipeable Operators</strong> are the kind that can be piped to Observables using the syntax <code>observableInstance.pipe(operator())</code>. These include, <a href=\"/api/operators/filter\"><code>filter(...)</code></a>, and <a href=\"/api/operators/mergeMap\"><code>mergeMap(...)</code></a>. When called, they do not <em>change</em> the existing Observable instance. Instead, they return a <em>new</em> Observable, whose subscription logic is based on the first Observable.</p>\n<p><span class=\"informal\">A Pipeable Operator is a function that takes an Observable as its input and returns another Observable. It is a pure operation: the previous Observable stays unmodified.</span></p>\n<p translation-result=\"on\">可联入管道的操作符本质上是一个纯函数，它将一个 Observable 作为输入并生成另一个 Observable 作为输出。订阅此输出 Observable 也会同时订阅其输入 Observable。</p><p translation-origin=\"off\">A Pipeable Operator is essentially a pure function which takes one Observable as input and generates another Observable as output. Subscribing to the output Observable will also subscribe to the input Observable.</p>\n\n<p translation-result=\"on\"><strong>创建操作符</strong>是另一种操作符，可以作为独立函数调用以创建新的 Observable。例如： <code><a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3)</code> 创建一个 observable，它将一个接一个地发出 1、2 和 3。创建操作符将在后面的部分中更详细地讨论。</p><p translation-origin=\"off\"><strong>Creation Operators</strong> are the other kind of operator, which can be called as standalone functions to create a new Observable. For example: <code><a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3)</code> creates an observable that will emit 1, 2, and 3, one right after another. Creation operators will be discussed in more detail in a later section.</p>\n\n<p translation-result=\"on\">例如，名为 <a href=\"/api/operators/map\"><code>map</code></a> 的操作符类似于同名的 Array 方法。正如 <code>[1, 2, 3].map(x =&gt; x * x)</code> 将产生 <code>[1, 4, 9]</code> 一样，它创建的 Observable 如下：</p><p translation-origin=\"off\">For example, the operator called <a href=\"/api/operators/map\"><code>map</code></a> is analogous to the Array method of the same name. Just as <code>[1, 2, 3].map(x =&gt; x * x)</code> will yield <code>[1, 4, 9]</code>, the Observable created like this:</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a> } from 'rxjs';\n\n<a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3)\n  .pipe(<a href=\"api/index/function/map\" class=\"code-anchor\">map</a>((x) =&gt; x * x))\n  .subscribe((v) =&gt; console.log(`value: ${v}`));\n\n// Logs:\n// value: 1\n// value: 4\n// value: 9\n</code-example>\n<p translation-result=\"on\">这将发出 <code>1</code>、<code>4</code>、<code>9</code>。另一个有用的操作符是 <a href=\"/api/operators/first\"><code>first</code></a> ：</p><p translation-origin=\"off\">will emit <code>1</code>, <code>4</code>, <code>9</code>. Another useful operator is <a href=\"/api/operators/first\"><code>first</code></a>:</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/of\" class=\"code-anchor\">of</a>, <a href=\"api/index/function/first\" class=\"code-anchor\">first</a> } from 'rxjs';\n\n<a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3)\n  .pipe(<a href=\"api/index/function/first\" class=\"code-anchor\">first</a>())\n  .subscribe((v) =&gt; console.log(`value: ${v}`));\n\n// Logs:\n// value: 1\n</code-example>\n<p translation-result=\"on\">请注意，<code><a href=\"api/index/function/map\" class=\"code-anchor\">map</a></code> 在逻辑上看必须动态构建，因为它必须给出映射函数。作为对比，<code><a href=\"api/index/function/first\" class=\"code-anchor\">first</a></code> 可能是一个常数，但仍然是动态构建的。作为一般性的实践，所有操作符都是构造出来的，无论它们是否需要参数。</p><p translation-origin=\"off\">Note that <code><a href=\"api/index/function/map\" class=\"code-anchor\">map</a></code> logically must be constructed on the fly, since it must be given the mapping function to. By contrast, <code><a href=\"api/index/function/first\" class=\"code-anchor\">first</a></code> could be a constant, but is nonetheless constructed on the fly. As a general practice, all operators are constructed, whether they need arguments or not.</p>\n\n<h2 id=\"piping\" translation-result=\"on\">管道<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#piping\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Piping<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#piping\"><i class=\"material-icons\">link</i></a></h2>\n\n<p>Pipeable operators are functions, so they <em>could</em> be used like ordinary functions: <code>op()(obs)</code> — but in practice, there tend to be many of them convolved together, and quickly become unreadable: <code>op4()(op3()(op2()(op1()(obs))))</code>. For that reason, Observables have a method called <code>.pipe()</code> that accomplishes the same thing while being much easier to read:</p>\n<code-example language=\"ts\">\nobs.pipe(op1(), op2(), op3(), op4());\n</code-example>\n<p translation-result=\"on\">作为一种风格，即使只有一个操作符，也从不使用 <code>op()(obs)</code>；<code>obs.pipe(op())</code> 是普遍的首选项。</p><p translation-origin=\"off\">As a stylistic matter, <code>op()(obs)</code> is never used, even if there is only one operator; <code>obs.pipe(op())</code> is universally preferred.</p>\n\n<h2 id=\"creation-operators\" translation-result=\"on\">创建操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creation-operators\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Creation Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creation-operators\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><strong>什么是创建操作符？</strong>与可联入管道的操作符不同，创建操作符一种函数，可用于根据一些常见预定义行为或联合其它 Observable 来创建一个 Observable。</p><p translation-origin=\"off\"><strong>What are creation operators?</strong> Distinct from pipeable operators, creation operators are functions that can be used to create an Observable with some common predefined behavior or by joining other Observables.</p>\n\n<p translation-result=\"on\">创建操作符的典型示例是 <code><a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a></code> 函数。它将一个数字（而不是 Observable）作为输入参数，并产生一个 Observable 作为输出：</p><p translation-origin=\"off\">A typical example of a creation operator would be the <code><a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a></code> function. It takes a number (not an Observable) as input argument, and produces an Observable as output:</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a> } from 'rxjs';\n\nconst <a href=\"api/index/const/observable\" class=\"code-anchor\">observable</a> = <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(1000 /* number <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> milliseconds */);\n</code-example>\n<p>See the list of all static creation operators <a href=\"guide/operators#creation-operators-list\">here</a>.</p>\n<h2 id=\"higher-order-observables\" translation-result=\"on\">高阶 Observable<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#higher-order-observables\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Higher-order Observables<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#higher-order-observables\"><i class=\"material-icons\">link</i></a></h2>\n\n<p>Observables most commonly emit ordinary values like strings and numbers, but surprisingly often, it is necessary to handle Observables <em>of</em> Observables, so-called higher-order Observables. For example, imagine you had an Observable emitting strings that were the URLs of files you wanted to see. The code might look like this:</p>\n<code-example language=\"ts\">\nconst fileObservable = urlObservable.pipe(<a href=\"api/index/function/map\" class=\"code-anchor\">map</a>((url) =&gt; http.get(url)));\n</code-example>\n<p><code>http.get()</code> returns an Observable (of string or string arrays probably) for each individual URL. Now you have an Observable <em>of</em> Observables, a higher-order Observable.</p>\n<p>But how do you work with a higher-order Observable? Typically, by <em>flattening</em>: by (somehow) converting a higher-order Observable into an ordinary Observable. For example:</p>\n<code-example language=\"ts\">\nconst fileObservable = urlObservable.pipe(\n  <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>((url) =&gt; http.get(url)),\n  <a href=\"api/index/function/concatAll\" class=\"code-anchor\">concatAll</a>()\n);\n</code-example>\n<p>The <a href=\"/api/operators/concatAll\"><code>concatAll()</code></a> operator subscribes to each \"inner\" Observable that comes out of the \"outer\" Observable, and copies all the emitted values until that Observable completes, and goes on to the next one. All of the values are in that way concatenated. Other useful flattening operators (called <a href=\"guide/operators#join-operators\"><em>join operators</em></a>) are</p>\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"/api/operators/mergeAll\"><code>mergeAll()</code></a> — 在每个内部 Observable 抵达时订阅它，然后在每个值抵达时发出这个值</p><p translation-origin=\"off\"><a href=\"/api/operators/mergeAll\"><code>mergeAll()</code></a> — subscribes to each inner Observable as it arrives, then emits each value as it arrives</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"/api/operators/switchAll\"><code>switchAll()</code></a> — 在第一个内部 Observable 抵达时订阅它，并在每个值抵达时发出这个值，但是当下一个内部 Observable 抵达时，退订前一个，并订阅新的。</p><p translation-origin=\"off\"><a href=\"/api/operators/switchAll\"><code>switchAll()</code></a> — subscribes to the first inner Observable when it arrives, and emits each value as it arrives, but when the next inner Observable arrives, unsubscribes to the previous one, and subscribes to the new one.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"/api/operators/exhaustAll\"><code>exhaustAll()</code></a> — 在第一个内部 Observable 抵达时订阅它，并在每个值抵达时发出这个值，丢弃所有新抵达的内部 Observable 直到第一个完成，然后等待下一个内部 Observable。</p><p translation-origin=\"off\"><a href=\"/api/operators/exhaustAll\"><code>exhaustAll()</code></a> — subscribes to the first inner Observable when it arrives, and emits each value as it arrives, discarding all newly arriving inner Observables until that first one completes, then waits for the next inner Observable.</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">正如许多数组库会将 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\"><code>map()</code></a> 和 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat\"><code>flat()</code></a> （或 <code>flatten()</code>） 组合成一个 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap\"><code>flatMap()</code></a> 一样，所有 RxJS 展平操作符 <a href=\"/api/operators/concatMap\"><code>concatMap()</code></a>、<a href=\"/api/operators/mergeMap\"><code>mergeMap()</code></a>、<a href=\"/api/operators/switchMap\"><code>switchMap()</code></a> 和 <a href=\"/api/operators/exhaustMap\"><code>exhaustMap()</code></a> 都有其映射等价物 <a href=\"/api/operators/exhaustMap\"><code>exhaustMap()</code></a>。</p><p translation-origin=\"off\">Just as many array libraries combine <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\"><code>map()</code></a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat\"><code>flat()</code></a> (or <code>flatten()</code>) into a single <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap\"><code>flatMap()</code></a>, there are mapping equivalents of all the RxJS flattening operators <a href=\"/api/operators/concatMap\"><code>concatMap()</code></a>, <a href=\"/api/operators/mergeMap\"><code>mergeMap()</code></a>, <a href=\"/api/operators/switchMap\"><code>switchMap()</code></a>, and <a href=\"/api/operators/exhaustMap\"><code>exhaustMap()</code></a>.</p>\n\n<h2 id=\"marble-diagrams\" translation-result=\"on\">弹珠图<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#marble-diagrams\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Marble diagrams<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#marble-diagrams\"><i class=\"material-icons\">link</i></a></h2>\n\n<p>To explain how operators work, textual descriptions are often not enough. Many operators are related to time, they may for instance delay, sample, throttle, or debounce value emissions in different ways. Diagrams are often a better tool for that. <em>Marble Diagrams</em> are visual representations of how operators work, and include the input Observable(s), the operator and its parameters, and the output Observable.</p>\n<p><span class=\"informal\">In a marble diagram, time flows to the right, and the diagram describes how values (\"marbles\") are emitted on the Observable execution.</span></p>\n<p translation-result=\"on\">你可以在下面看到弹珠图的解析。</p><p translation-origin=\"off\">Below you can see the anatomy of a marble diagram.</p>\n\n<img src=\"assets/images/guide/marble-diagram-anatomy-cn.svg\" width=\"699\" height=\"346\">\n<p translation-result=\"on\">在整个文档站中，我们广泛使用弹珠图来解释操作符的工作方式。它们在其他环境中也可能非常有用，比如在白板上，甚至在我们的单元测试中（如 ASCII 图表）。</p><p translation-origin=\"off\">Throughout this documentation site, we extensively use marble diagrams to explain how operators work. They may be really useful in other contexts too, like on a whiteboard or even in our unit tests (as ASCII diagrams).</p>\n\n<h2 id=\"categories-of-operators\" translation-result=\"on\">操作符的分类<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#categories-of-operators\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Categories of operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#categories-of-operators\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">有很多用于不同用途的操作符，它们可以分类为：创建、转换、过滤、联结、多播、错误处理、实用工具等。在以下列表中，你将找到按类别组织的所有操作符。</p><p translation-origin=\"off\">There are operators for different purposes, and they may be categorized as: creation, transformation, filtering, joining, multicasting, error handling, utility, etc. In the following list you will find all the operators organized in categories.</p>\n\n<p translation-result=\"on\">如需完整概述，请参阅<a href=\"/api\">参考资料页面</a>。</p><p translation-origin=\"off\">For a complete overview, see the <a href=\"/api\">references page</a>.</p>\n\n<h3 id=\"creation-operators-1\"><a id=\"creation-operators-list\"></a>Creation Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creation-operators-1\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p><a href=\"/api/ajax/ajax\"><code>ajax</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/bindCallback\"><code>bindCallback</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/bindNodeCallback\"><code>bindNodeCallback</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/defer\"><code>defer</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/empty\"><code>empty</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/from\"><code>from</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/fromEvent\"><code>fromEvent</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/fromEventPattern\"><code>fromEventPattern</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/generate\"><code>generate</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/interval\"><code>interval</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/of\"><code>of</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/range\"><code>range</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/throwError\"><code>throwError</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/timer\"><code>timer</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/iif\"><code>iif</code></a></p>\n</li>\n</ul>\n<h3 id=\"join-creation-operators\"><a id=\"join-creation-operators\"></a>Join Creation Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#join-creation-operators\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">这些是 Observable 的创建操作符，它们也具有联结功能 —— 发出多个源 Observable 的值。</p><p translation-origin=\"off\">These are Observable creation operators that also have join functionality -- emitting values of multiple source Observables.</p>\n\n<ul>\n<li>\n<p><a href=\"/api/index/function/combineLatest\"><code>combineLatest</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/concat\"><code>concat</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/forkJoin\"><code>forkJoin</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/merge\"><code>merge</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/partition\"><code>partition</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/race\"><code>race</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/index/function/zip\"><code>zip</code></a></p>\n</li>\n</ul>\n<h3 id=\"transformation-operators\" translation-result=\"on\">转换操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#transformation-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Transformation Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#transformation-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/buffer\"><code>buffer</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/bufferCount\"><code>bufferCount</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/bufferTime\"><code>bufferTime</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/bufferToggle\"><code>bufferToggle</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/bufferWhen\"><code>bufferWhen</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/concatMap\"><code>concatMap</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/concatMapTo\"><code>concatMapTo</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/exhaust\"><code>exhaust</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/exhaustMap\"><code>exhaustMap</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/expand\"><code>expand</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/groupBy\"><code>groupBy</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/map\"><code>map</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/mapTo\"><code>mapTo</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/mergeMap\"><code>mergeMap</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/mergeMapTo\"><code>mergeMapTo</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/mergeScan\"><code>mergeScan</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/pairwise\"><code>pairwise</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/partition\"><code>partition</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/pluck\"><code>pluck</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/scan\"><code>scan</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/switchScan\"><code>switchScan</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/switchMap\"><code>switchMap</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/switchMapTo\"><code>switchMapTo</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/window\"><code>window</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/windowCount\"><code>windowCount</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/windowTime\"><code>windowTime</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/windowToggle\"><code>windowToggle</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/windowWhen\"><code>windowWhen</code></a></p>\n</li>\n</ul>\n<h3 id=\"filtering-operators\" translation-result=\"on\">过滤操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#filtering-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Filtering Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#filtering-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/audit\"><code>audit</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/auditTime\"><code>auditTime</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/debounce\"><code>debounce</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/debounceTime\"><code>debounceTime</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/distinct\"><code>distinct</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/distinctUntilChanged\"><code>distinctUntilChanged</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/distinctUntilKeyChanged\"><code>distinctUntilKeyChanged</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/elementAt\"><code>elementAt</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/filter\"><code>filter</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/first\"><code>first</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/ignoreElements\"><code>ignoreElements</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/last\"><code>last</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/sample\"><code>sample</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/sampleTime\"><code>sampleTime</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/single\"><code>single</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/skip\"><code>skip</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/skipLast\"><code>skipLast</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/skipUntil\"><code>skipUntil</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/skipWhile\"><code>skipWhile</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/take\"><code>take</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/takeLast\"><code>takeLast</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/takeUntil\"><code>takeUntil</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/takeWhile\"><code>takeWhile</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/throttle\"><code>throttle</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/throttleTime\"><code>throttleTime</code></a></p>\n</li>\n</ul>\n<h3 id=\"join-operators\"><a id=\"join-operators\"></a>Join Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#join-operators\"><i class=\"material-icons\">link</i></a></h3>\n<p>Also see the <a href=\"guide/operators#join-creation-operators\">Join Creation Operators</a> section above.</p>\n<ul>\n<li>\n<p><a href=\"/api/operators/combineLatestAll\"><code>combineLatestAll</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/concatAll\"><code>concatAll</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/exhaustAll\"><code>exhaustAll</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/mergeAll\"><code>mergeAll</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/switchAll\"><code>switchAll</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/startWith\"><code>startWith</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/withLatestFrom\"><code>withLatestFrom</code></a></p>\n</li>\n</ul>\n<h3 id=\"multicasting-operators\" translation-result=\"on\">多播操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#multicasting-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Multicasting Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#multicasting-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/multicast\"><code>multicast</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/publish\"><code>publish</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/publishBehavior\"><code>publishBehavior</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/publishLast\"><code>publishLast</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/publishReplay\"><code>publishReplay</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/share\"><code>share</code></a></p>\n</li>\n</ul>\n<h3 id=\"error-handling-operators\" translation-result=\"on\">错误处理操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#error-handling-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Error Handling Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#error-handling-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/catchError\"><code>catchError</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/retry\"><code>retry</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/retryWhen\"><code>retryWhen</code></a></p>\n</li>\n</ul>\n<h3 id=\"utility-operators\" translation-result=\"on\">实用工具操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#utility-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Utility Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#utility-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/tap\"><code>tap</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/delay\"><code>delay</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/delayWhen\"><code>delayWhen</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/dematerialize\"><code>dematerialize</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/materialize\"><code>materialize</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/observeOn\"><code>observeOn</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/subscribeOn\"><code>subscribeOn</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/timeInterval\"><code>timeInterval</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/timestamp\"><code>timestamp</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/timeout\"><code>timeout</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/timeoutWith\"><code>timeoutWith</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/toArray\"><code>toArray</code></a></p>\n</li>\n</ul>\n<h3 id=\"conditional-and-boolean-operators\" translation-result=\"on\">条件和布尔操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#conditional-and-boolean-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Conditional and Boolean Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#conditional-and-boolean-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/defaultIfEmpty\"><code>defaultIfEmpty</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/every\"><code>every</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/find\"><code>find</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/findIndex\"><code>findIndex</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/isEmpty\"><code>isEmpty</code></a></p>\n</li>\n</ul>\n<h3 id=\"mathematical-and-aggregate-operators\" translation-result=\"on\">数学和聚合操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#mathematical-and-aggregate-operators\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Mathematical and Aggregate Operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#mathematical-and-aggregate-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p><a href=\"/api/operators/count\"><code>count</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/max\"><code>max</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/min\"><code>min</code></a></p>\n</li>\n<li>\n<p><a href=\"/api/operators/reduce\"><code>reduce</code></a></p>\n</li>\n</ul>\n<h2 id=\"creating-custom-operators\" translation-result=\"on\">创建自定义操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creating-custom-operators\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Creating custom operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creating-custom-operators\"><i class=\"material-icons\">link</i></a></h2>\n\n<h3 id=\"use-the-pipe-function-to-make-new-operators\" translation-result=\"on\">使用 <code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> 函数创建新的操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#使用-pipe-函数创建新的操作符\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Use the <code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> function to make new operators<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#use-the-pipe-function-to-make-new-operators\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">如果代码中有常用的操作符序列，请使用 <code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> 函数将序列提取到新的操作符中。即使此序列不是那么通用，将其分解为单个操作符也可以提高可读性。</p><p translation-origin=\"off\">If there is a commonly used sequence of operators in your code, use the <code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> function to extract the sequence into a new operator. Even if a sequence is not that common, breaking it out into a single operator can improve readability.</p>\n\n<p translation-result=\"on\">例如，你可以创建一个丢弃奇数值并将偶数值翻倍的函数，如下所示：</p><p translation-origin=\"off\">For example, you could make a function that discarded odd values and doubled even values like this:</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>, <a href=\"api/index/function/filter\" class=\"code-anchor\">filter</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a> } from 'rxjs';\n\nfunction discardOddDoubleEven() {\n  return <a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>(\n    <a href=\"api/index/function/filter\" class=\"code-anchor\">filter</a>((v) =&gt; !(v % 2)),\n    <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>((v) =&gt; v + v)\n  );\n}\n</code-example>\n<p translation-result=\"on\">（<code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> 函数类似于 Observable 上的 <code>.pipe()</code> 方法，但并不相同。）</p><p translation-origin=\"off\">(The <code><a href=\"api/index/function/pipe\" class=\"code-anchor\">pipe</a>()</code> function is analogous to, but not the same thing as, the <code>.pipe()</code> method on an Observable.)</p>\n\n<h3 id=\"creating-new-operators-from-scratch\" translation-result=\"on\">从头开始创建新的操作符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creating-new-operators-from-scratch\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Creating new operators from scratch<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/operators#creating-new-operators-from-scratch\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">它更复杂，但如果你必须编写一个不能由现有操作符组合而成的操作符（很少发生），你可以使用 Observable 构造函数从头开始编写一个操作符，如下所示：</p><p translation-origin=\"off\">It is more complicated, but if you have to write an operator that cannot be made from a combination of existing operators (a rare occurrence), you can write an operator from scratch using the Observable constructor, like this:</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>, <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> } from 'rxjs';\n\nfunction <a href=\"api/index/function/delay\" class=\"code-anchor\">delay</a>&lt;T&gt;(delayInMillis: number) {\n  return (<a href=\"api/index/const/observable\" class=\"code-anchor\">observable</a>: <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;T&gt;) =&gt;\n    new <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;T&gt;((subscriber) =&gt; {\n      // this function will be called each time this\n      // <a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a> is subscribed to.\n      const allTimerIDs = new Set();\n      let hasCompleted = false;\n      const subscription = observable.subscribe({\n        next(value) {\n          // Start a <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a> to <a href=\"api/index/function/delay\" class=\"code-anchor\">delay</a> the next value\n          // <a href=\"api/index/function/from\" class=\"code-anchor\">from</a> being pushed.\n          const timerID = setTimeout(() =&gt; {\n            subscriber.next(value);\n            // after we push the value, we need to clean up the <a href=\"api/index/function/timer\" class=\"code-anchor\">timer</a> timerID\n            allTimerIDs.delete(timerID);\n            // If the source has completed, and there are no more timers running,\n            // we can complete the resulting observable.\n            if (hasCompleted &amp;&amp; allTimerIDs.size === 0) {\n              subscriber.complete();\n            }\n          }, delayInMillis);\n\n          allTimerIDs.add(timerID);\n        },\n        error(err) {\n          // We need to make sure we're propagating our errors through.\n          subscriber.error(err);\n        },\n        complete() {\n          hasCompleted = true;\n          // If we still have timers running, we don't want to complete yet.\n          if (allTimerIDs.size === 0) {\n            subscriber.complete();\n          }\n        },\n      });\n\n      // Return the finalization logic. This will be invoked when\n      // the result errors, completes, or is unsubscribed.\n      return () =&gt; {\n        subscription.unsubscribe();\n        // Clean up our timers.\n        for (const timerID <a href=\"api/index/function/of\" class=\"code-anchor\">of</a> allTimerIDs) {\n          clearTimeout(timerID);\n        }\n      };\n    });\n}\n\n// Try it out!\n<a href=\"api/index/function/of\" class=\"code-anchor\">of</a>(1, 2, 3).pipe(<a href=\"api/index/function/delay\" class=\"code-anchor\">delay</a>(1000)).subscribe(console.log);\n</code-example>\n<p translation-result=\"on\">请注意，你必须</p><p translation-origin=\"off\">Note that you must</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在订阅输入 Observable 时实现所有三个 Observer 函数，<code>next()</code>、<code>error()</code> 和 <code>complete()</code>。</p><p translation-origin=\"off\">implement all three Observer functions, <code>next()</code>, <code>error()</code>, and <code>complete()</code> when subscribing to the input Observable.</p>\n\n</li>\n<li>\n<p>implement a \"finalization\" function that cleans up when the Observable completes (in this case by unsubscribing and clearing any pending timeouts).</p>\n</li>\n<li>\n<p>return that finalization function from the function passed to the Observable constructor.</p>\n</li>\n</ol>\n<p translation-result=\"on\">当然，这只是一个例子，因为 <a href=\"/api/operators/delay\"><code>delay()</code></a> 操作符已经存在了。</p><p translation-origin=\"off\">Of course, this is only an example; the <a href=\"/api/operators/delay\"><code>delay()</code></a> operator already exists.</p>\n\n\n</div>\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /api\n - /api/ajax/ajax\n - /api/index/function/bindCallback\n - /api/index/function/bindNodeCallback\n - /api/index/function/combineLatest\n - /api/index/function/concat\n - /api/index/function/defer\n - /api/index/function/empty\n - /api/index/function/forkJoin\n - /api/index/function/from\n - /api/index/function/fromEvent\n - /api/index/function/fromEventPattern\n - /api/index/function/generate\n - /api/index/function/iif\n - /api/index/function/interval\n - /api/index/function/merge\n - /api/index/function/of\n - /api/index/function/partition\n - /api/index/function/race\n - /api/index/function/range\n - /api/index/function/throwError\n - /api/index/function/timer\n - /api/index/function/zip\n - /api/operators/audit\n - /api/operators/auditTime\n - /api/operators/buffer\n - /api/operators/bufferCount\n - /api/operators/bufferTime\n - /api/operators/bufferToggle\n - /api/operators/bufferWhen\n - /api/operators/catchError\n - /api/operators/combineLatestAll\n - /api/operators/concatAll\n - /api/operators/concatMap\n - /api/operators/concatMapTo\n - /api/operators/count\n - /api/operators/debounce\n - /api/operators/debounceTime\n - /api/operators/defaultIfEmpty\n - /api/operators/delay\n - /api/operators/delayWhen\n - /api/operators/dematerialize\n - /api/operators/distinct\n - /api/operators/distinctUntilChanged\n - /api/operators/distinctUntilKeyChanged\n - /api/operators/elementAt\n - /api/operators/every\n - /api/operators/exhaust\n - /api/operators/exhaustAll\n - /api/operators/exhaustMap\n - /api/operators/expand\n - /api/operators/filter\n - /api/operators/find\n - /api/operators/findIndex\n - /api/operators/first\n - /api/operators/groupBy\n - /api/operators/ignoreElements\n - /api/operators/isEmpty\n - /api/operators/last\n - /api/operators/map\n - /api/operators/mapTo\n - /api/operators/materialize\n - /api/operators/max\n - /api/operators/mergeAll\n - /api/operators/mergeMap\n - /api/operators/mergeMapTo\n - /api/operators/mergeScan\n - /api/operators/min\n - /api/operators/multicast\n - /api/operators/observeOn\n - /api/operators/pairwise\n - /api/operators/partition\n - /api/operators/pluck\n - /api/operators/publish\n - /api/operators/publishBehavior\n - /api/operators/publishLast\n - /api/operators/publishReplay\n - /api/operators/reduce\n - /api/operators/retry\n - /api/operators/retryWhen\n - /api/operators/sample\n - /api/operators/sampleTime\n - /api/operators/scan\n - /api/operators/share\n - /api/operators/single\n - /api/operators/skip\n - /api/operators/skipLast\n - /api/operators/skipUntil\n - /api/operators/skipWhile\n - /api/operators/startWith\n - /api/operators/subscribeOn\n - /api/operators/switchAll\n - /api/operators/switchMap\n - /api/operators/switchMapTo\n - /api/operators/switchScan\n - /api/operators/take\n - /api/operators/takeLast\n - /api/operators/takeUntil\n - /api/operators/takeWhile\n - /api/operators/tap\n - /api/operators/throttle\n - /api/operators/throttleTime\n - /api/operators/timeInterval\n - /api/operators/timeout\n - /api/operators/timeoutWith\n - /api/operators/timestamp\n - /api/operators/toArray\n - /api/operators/window\n - /api/operators/windowCount\n - /api/operators/windowTime\n - /api/operators/windowToggle\n - /api/operators/windowWhen\n - /api/operators/withLatestFrom\n - api/index/class/Observable\n - api/index/const/observable\n - api/index/function/concatAll\n - api/index/function/delay\n - api/index/function/filter\n - api/index/function/first\n - api/index/function/from\n - api/index/function/interval\n - api/index/function/map\n - api/index/function/of\n - api/index/function/pipe\n - api/index/function/timer\n - guide/operators#categories-of-operators\n - guide/operators#conditional-and-boolean-operators\n - guide/operators#creating-custom-operators\n - guide/operators#creating-new-operators-from-scratch\n - guide/operators#creation-operators\n - guide/operators#creation-operators-1\n - guide/operators#creation-operators-list\n - guide/operators#error-handling-operators\n - guide/operators#filtering-operators\n - guide/operators#higher-order-observables\n - guide/operators#join-creation-operators\n - guide/operators#join-operators\n - guide/operators#marble-diagrams\n - guide/operators#mathematical-and-aggregate-operators\n - guide/operators#multicasting-operators\n - guide/operators#piping\n - guide/operators#rxjs-operators\n - guide/operators#rxjs-操作符\n - guide/operators#transformation-operators\n - guide/operators#use-the-pipe-function-to-make-new-operators\n - guide/operators#utility-operators\n - guide/operators#what-are-operators\n - guide/operators#什么是操作符\n - guide/operators#从头开始创建新的操作符\n - guide/operators#使用-pipe-函数创建新的操作符\n - guide/operators#创建操作符\n - guide/operators#创建自定义操作符\n - guide/operators#多播操作符\n - guide/operators#实用工具操作符\n - guide/operators#弹珠图\n - guide/operators#操作符的分类\n - guide/operators#数学和聚合操作符\n - guide/operators#条件和布尔操作符\n - guide/operators#管道\n - guide/operators#转换操作符\n - guide/operators#过滤操作符\n - guide/operators#错误处理操作符\n - guide/operators#高阶-observable\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\n-->"}