{"id":"api/operators/switchAll","title":"switchAll","contents":"\n\n<article>\n  <div class=\"page-actions\">\n    <a href=\"https://github.com/reactivex/rxjs/edit/master/src/internal/operators/switchAll.ts?message=docs(operators)%3A%20describe%20your%20change...#L4-L76\" aria-label=\"编辑建议\" title=\"编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n    <a href=\"https://github.com/reactivex/rxjs/tree/8.0.0-alpha.7/src/internal/operators/switchAll.ts#L4-L76\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n  </div>\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n          { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io//api\", \"name\": \"API\" } },\n          { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/operators\", \"name\": \"rxjs/operators\" } },\n          { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/operators/switchAll\", \"name\": \"switchAll\" } }\n          ]\n        }\n      </script>\n      <a href=\"/api\">API</a> / <a href=\"api/operators\">rxjs/operators</a>\n    </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"switchall\">switchAll<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/operators/switchAll#switchall\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n    \n    \n    <label class=\"api-status-label stable\">稳定</label>\n    \n    <label class=\"api-status-label operator\">操作符</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  \n\n  <p class=\"short-description\"></p><p translation-result=\"on\">将高阶 Observable 转换为一阶 Observable，仅从最近的 observable 序列中产生值</p><p translation-origin=\"off\">Converts a higher-order Observable into a first-order Observable\nproducing values only from the most recent observable sequence</p>\n\n<p translation-result=\"on\"><span class=\"informal\">将高阶 Observable（Observable-of-Observables）展平。</span></p><p translation-origin=\"off\"><span class=\"informal\">Flattens an Observable-of-Observables.</span></p>\n\n<p><img src=\"/assets/images/marble-diagrams/switchAll.png\" width=\"100%\" alt=\"switchAll marble diagram\"></p>\n<p translation-result=\"on\"><code><a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a></code> 订阅的源是 observable of observables，也称为“高阶 Observable”（或 <code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;<a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;T&gt;&gt;</code>）。它会订阅源发出的最近的“内部 observable”，并退订任何先前订阅的内部 observable，这样在任何时间点都只能订阅最近的内部 observable。<code><a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a></code> 返回的结果 observable 只有在源 observable 已完成，<em>并且</em>任何当前订阅的内部 observable（如果有的话）也都已完成时才会完成。</p><p translation-origin=\"off\"><code><a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a></code> subscribes to a source that is an observable of observables, also known as a\n\"higher-order observable\" (or <code><a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;<a href=\"api/index/class/Observable\" class=\"code-anchor\">Observable</a>&lt;T&gt;&gt;</code>). It subscribes to the most recently\nprovided \"inner observable\" emitted by the source, unsubscribing from any previously subscribed\nto inner observable, such that only the most recent inner observable may be subscribed to at\nany point in time. The resulting observable returned by <code><a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a></code> will only complete if the\nsource observable completes, <em>and</em> any currently subscribed to inner observable also has completed,\nif there are any.</p>\n\n<h2 id=\"examples\" translation-result=\"on\">例子<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/operators/switchAll#examples\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/operators/switchAll#examples\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">为每个点击事件产生一个新的定期重复 Observable，但对于每个新点击，取消前一个定期重复 Observable 并订阅新的定期重复 Observable</p><p translation-origin=\"off\">Spawn a new interval observable for each click event, but for every new\nclick, cancel the previous interval and subscribe to the new one</p>\n\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/fromEvent\" class=\"code-anchor\">fromEvent</a>, <a href=\"api/index/function/tap\" class=\"code-anchor\">tap</a>, <a href=\"api/index/function/map\" class=\"code-anchor\">map</a>, <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>, <a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a> } from 'rxjs';\n\nconst clicks = <a href=\"api/index/function/fromEvent\" class=\"code-anchor\">fromEvent</a>(document, 'click').pipe(<a href=\"api/index/function/tap\" class=\"code-anchor\">tap</a>(() =&gt; console.log('click')));\nconst source = clicks.pipe(<a href=\"api/index/function/map\" class=\"code-anchor\">map</a>(() =&gt; <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(1000)));\n\nsource\n  .pipe(<a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a>())\n  .subscribe(x =&gt; console.log(x));\n\n// Output\n// click\n// 0\n// 1\n// 2\n// 3\n// ...\n// click\n// 0\n// 1\n// 2\n// ...\n// click\n// ...\n</code-example>\n<p></p>\n  \n\n  \n\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <a href=\"api/index/function/switchAll\" class=\"code-anchor\">switchAll</a>&lt;O extends <a href=\"api/index/type-alias/ObservableInput\" class=\"code-anchor\">ObservableInput</a>&lt;any&gt;&gt;(): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&lt;O, <a href=\"api/index/type-alias/ObservedValueOf\" class=\"code-anchor\">ObservedValueOf</a>&lt;O&gt;&gt;</code-example>\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <p>没有参数。</p>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值\">返回值</h4>\n  <p translation-result=\"on\">一个返回 Observable 的函数，它会将高阶 Observable 转换为一阶 Observable，并且仅从最近的 Observable 序列中生成值。</p><p translation-origin=\"off\"><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&lt;O, <a href=\"api/index/type-alias/ObservedValueOf\" class=\"code-anchor\">ObservedValueOf</a>&lt;O&gt;&gt;</code>: A function that returns an Observable that converts a higher-order\nObservable into a first-order Observable producing values only from the most\nrecent Observable sequence.</p>\n\n\n  \n\n\n\n\n\n\n\n  \n\n\n\n\n  \n\n  \n<section ng-should-translate=\"\" class=\"see-also\">\n  <h2 id=\"see-also\">参见<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/operators/switchAll#see-also\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n  \n    <li><a href=\"api/operators/combineLatestAll\"><code>combineLatestAll</code></a>\n</li>\n    <li><a href=\"api/operators/concatAll\"><code>concatAll</code></a>\n</li>\n    <li><a href=\"api/operators/exhaustAll\"><code>exhaustAll</code></a>\n</li>\n    <li><a href=\"api/operators/switchMap\"><code>switchMap</code></a>\n</li>\n    <li><a href=\"api/operators/switchMapTo\"><code>switchMapTo</code></a>\n</li>\n    <li><a href=\"api/operators/mergeAll\"><code>mergeAll</code></a>\n</li>\n  </ul>\n</section>\n\n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - api/operators\n - api/operators/concatAll\n - api/operators/exhaustAll\n - api/operators/mergeAll\n - api/operators/switchMap\n - api/operators/switchMapTo\n-->\n<!-- links from this doc:\n - /api\n - api/index/class/Observable\n - api/index/function/fromEvent\n - api/index/function/interval\n - api/index/function/map\n - api/index/function/switchAll\n - api/index/function/tap\n - api/index/interface/OperatorFunction\n - api/index/type-alias/ObservableInput\n - api/index/type-alias/ObservedValueOf\n - api/operators\n - api/operators/combineLatestAll\n - api/operators/concatAll\n - api/operators/exhaustAll\n - api/operators/mergeAll\n - api/operators/switchAll#examples\n - api/operators/switchAll#see-also\n - api/operators/switchAll#switchall\n - api/operators/switchAll#例子\n - api/operators/switchMap\n - api/operators/switchMapTo\n - https://github.com/reactivex/rxjs/edit/master/src/internal/operators/switchAll.ts?message=docs(operators)%3A%20describe%20your%20change...#L4-L76\n - https://github.com/reactivex/rxjs/tree/8.0.0-alpha.7/src/internal/operators/switchAll.ts#L4-L76\n-->"}